seg000:0600 ;
seg000:0600 ; ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
seg000:0600 ; º	    This file is generated by The Interactive Disassembler (IDA)	º
seg000:0600 ; º	    Copyright (c) 2010 by Hex-Rays SA, <support@hex-rays.com>		º
seg000:0600 ; º			     Licensed to: Freeware version			º
seg000:0600 ; ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
seg000:0600 ;
seg000:0600 ; Input MD5	  : 05CF43FA326F8EDA6E58D4EE20983F3B
seg000:0600
seg000:0600 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:0600 ; File Name	  : D:\Documents and Settings\Erdoğan Tan\Desktop\FDISKMBR.BIN
seg000:0600 ; Format	  : Binary file
seg000:0600 ; Base Address: 0000h Range: 0000h - 0200h Loaded length: 0200h
seg000:0600
seg000:0600		    .8086
seg000:0600		    .model flat
seg000:0600
seg000:0600 ; ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ
seg000:0600
seg000:0600 ; Segment type: Regular
seg000:0600 seg000	    segment byte public	''
seg000:0600		    assume cs:seg000
seg000:0600		    ;org 600h
seg000:0600		    assume es:nothing, ss:nothing, ds:nothing
seg000:0600		    cli
seg000:0601		    xor	    ax,	ax
seg000:0603		    mov	    ss,	ax
seg000:0605		    mov	    sp,	7C00h
seg000:0608		    mov	    si,	sp
seg000:060A		    push    ax
seg000:060B		    pop	    es
seg000:060C		    push    ax
seg000:060D		    pop	    ds
seg000:060E		    sti
seg000:060F		    cld
seg000:0610		    mov	    di,	600h
seg000:0613		    mov	    cx,	256
seg000:0616		    repne movsw
seg000:0618		    jmp	    far	ptr loc_61D
seg000:061D
seg000:061D loc_61D:
seg000:061D		    mov	    si,	offset partition_table
seg000:0620		    mov	    bl,	4
seg000:0622
seg000:0622 loc_622:				    ; CODE XREF: seg000:0631j
seg000:0622		    cmp	    byte ptr [si], 80h
seg000:0625		    jz	    short loc_635
seg000:0627		    cmp	    byte ptr [si], 0
seg000:062A		    jnz	    short loc_648
seg000:062C		    add	    si,	16
seg000:062F		    dec	    bl
seg000:0631		    jnz	    short loc_622
seg000:0633		    int	    18h		    ; TRANSFER TO ROM BASIC
seg000:0633					    ; causes transfer to ROM-based BASIC (IBM-PC)
seg000:0633					    ; often reboots a compatible; often	has no effect at all
seg000:0635
seg000:0635 loc_635:				    ; CODE XREF: seg000:0625j
seg000:0635		    mov	    dx,	[si]
seg000:0637		    mov	    cx,	[si+2]
seg000:063A		    mov	    bp,	si
seg000:063C
seg000:063C loc_63C:				    ; CODE XREF: seg000:0646j
seg000:063C		    add	    si,	16
seg000:063F		    dec	    bl
seg000:0641		    jz	    short loc_65D
seg000:0643		    cmp	    byte ptr [si], 0
seg000:0646		    jz	    short loc_63C
seg000:0648
seg000:0648 loc_648:				    ; CODE XREF: seg000:062Aj
seg000:0648		    mov	    si,	offset invalid_p_table ; "Invalid partition table"
seg000:064B
seg000:064B print_msg:				    ; CODE XREF: seg000:0659j
seg000:064B					    ; seg000:0676j ...
seg000:064B		    lodsb
seg000:064C		    cmp	    al,	0
seg000:064E		    jz	    short hang
seg000:0650		    push    si
seg000:0651		    mov	    bx,	7
seg000:0654		    mov	    ah,	0Eh
seg000:0656		    int	    10h		    ; -	VIDEO -	WRITE CHARACTER	AND ADVANCE CURSOR (TTY	WRITE)
seg000:0656					    ; AL = character, BH = display page	(alpha modes)
seg000:0656					    ; BL = foreground color (graphics modes)
seg000:0658		    pop	    si
seg000:0659		    jmp	    short print_msg
seg000:065B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:065B
seg000:065B hang:				    ; CODE XREF: seg000:064Ej
seg000:065B					    ; seg000:hangj
seg000:065B		    jmp	    short hang
seg000:065D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:065D
seg000:065D loc_65D:				    ; CODE XREF: seg000:0641j
seg000:065D		    mov	    di,	5
seg000:0660
seg000:0660 loc_660:				    ; CODE XREF: seg000:0671j
seg000:0660		    mov	    bx,	7C00h
seg000:0663		    mov	    ax,	201h
seg000:0666		    push    di
seg000:0667		    int	    13h		    ; DISK - READ SECTORS INTO MEMORY
seg000:0667					    ; AL = number of sectors to	read, CH = track, CL = sector
seg000:0667					    ; DH = head, DL = drive, ES:BX -> buffer to	fill
seg000:0667					    ; Return: CF set on	error, AH = status, AL = number	of sectors read
seg000:0669		    pop	    di
seg000:066A		    jnb	    short loc_678
seg000:066C		    xor	    ax,	ax
seg000:066E		    int	    13h		    ; DISK - RESET DISK	SYSTEM
seg000:066E					    ; DL = drive (if bit 7 is set both hard disks and floppy disks reset)
seg000:0670		    dec	    di
seg000:0671		    jnz	    short loc_660
seg000:0673		    mov	    si,	offset err_loading_os ;	"Error loading operating system"
seg000:0676		    jmp	    short print_msg
seg000:0678 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:0678
seg000:0678 loc_678:				    ; CODE XREF: seg000:066Aj
seg000:0678		    mov	    si,	offset missing_os ; "Missing operating system"
seg000:067B		    mov	    di,	7DFEh
seg000:067E		    cmp	    word ptr [di], 0AA55h
seg000:0682		    jnz	    short print_msg
seg000:0684		    mov	    si,	bp
seg000:0686		    jmp	    far	ptr 0:7C00h
seg000:0686 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:068B invalid_p_table db 'Invalid partition table',0 ; DATA XREF: seg000:loc_648o
seg000:06A3 err_loading_os  db 'Error loading operating system',0 ; DATA XREF: seg000:0673o
seg000:06C2 missing_os	    db 'Missing operating system',0 ; DATA XREF: seg000:loc_678o
seg000:06DB		    db 227 dup(0)
seg000:07BE partition_table db 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0
seg000:07BE					    ; DATA XREF: seg000:loc_61Do
seg000:07BE		    db 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0
seg000:07BE		    db 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0
seg000:07BE		    db 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0
seg000:07FE boot_signature  db	55h ; U
seg000:07FF		    db 0AAh ; ª
seg000:07FF seg000	    ends
seg000:07FF
seg000:07FF
seg000:07FF		    end
